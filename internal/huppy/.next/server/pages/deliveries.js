"use strict";(()=>{var e={};e.id=172,e.ids=[172,888,660],e.modules={6021:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},1148:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{config:()=>b,default:()=>h,getServerSideProps:()=>f,getStaticPaths:()=>m,getStaticProps:()=>p,reportWebVitals:()=>g,routeModule:()=>P,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>w,unstable_getStaticParams:()=>x,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>v});var n=r(8877),i=r(4591),o=r(6021),l=r(9902),s=r.n(l),d=r(8627),u=r(3750),c=e([u]);u=(c.then?(await c)():c)[0];let h=(0,o.l)(u,"default"),p=(0,o.l)(u,"getStaticProps"),m=(0,o.l)(u,"getStaticPaths"),f=(0,o.l)(u,"getServerSideProps"),b=(0,o.l)(u,"config"),g=(0,o.l)(u,"reportWebVitals"),v=(0,o.l)(u,"unstable_getStaticProps"),y=(0,o.l)(u,"unstable_getStaticPaths"),x=(0,o.l)(u,"unstable_getStaticParams"),S=(0,o.l)(u,"unstable_getServerProps"),w=(0,o.l)(u,"unstable_getServerSideProps"),P=new n.PagesRouteModule({definition:{kind:i.x.PAGES,page:"/deliveries",pathname:"/deliveries",bundlePath:"",filename:""},components:{App:d.default,Document:s()},userland:u});a()}catch(e){a(e)}})},8627:(e,t,r)=>{r.r(t),r.d(t,{default:()=>o});var a=r(997);let n=require("next/head");var i=r.n(n);function o({Component:e,pageProps:t}){return(0,a.jsxs)(a.Fragment,{children:[a.jsx(i(),{children:a.jsx("script",{async:!0,src:"https://cdn.tailwindcss.com"})}),a.jsx(e,{...t})]})}},3750:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>u,getServerSideProps:()=>d});var n=r(997),i=r(9974),o=r(6689),l=r(9977),s=e([i,l]);async function d(e){(0,i.hu)(!1);let t=(0,l.xA)(),r=await t.octokit.rest.apps.listWebhookDeliveries({per_page:100,cursor:e.query.cursor??void 0}),a=r.headers.link?.match(/(?<=<)([\S]*)(?=>; rel="Next")/i),n=null;return a&&(n=new URL(a[0]).searchParams.get("cursor")),{props:{deliveries:r.data,cursor:n}}}function u({deliveries:e,cursor:t}){let[r,a]=(0,o.useState)(null),[i,l]=(0,o.useState)(!1),[s,d]=(0,o.useState)(!1);return(0,n.jsxs)("div",{className:"absolute inset-0 flex h-screen flex-col overflow-hidden",children:[n.jsx("h1",{className:"flex-none border-b px-5 py-4 text-xl",children:"Deliveries"}),(0,n.jsxs)("div",{className:"flex flex-auto overflow-hidden",children:[(0,n.jsxs)("ol",{className:"w-96 flex-none overflow-auto border-r",children:[e.map(e=>{var t;return(0,n.jsxs)("li",{className:`border-b px-5 py-3 ${r?.id===e.id?"bg-blue-100":"hover:bg-gray-50"}`,onClick:()=>a({id:e.id}),children:[(0,n.jsxs)("div",{className:"font-semibold",children:[e.event,e.action&&`.${e.action}`]}),n.jsx("div",{className:"text-sm",children:(t=new Date(e.delivered_at),new Intl.DateTimeFormat("en-GB",{dateStyle:"short",timeStyle:"short"}).format(t))})]},e.id)}),n.jsx("li",{children:n.jsx("a",{className:"center flex items-center justify-center border-b px-5 py-3 hover:bg-gray-50",href:`?cursor=${t}`,children:"Load more..."})})]}),r&&r.data?(0,n.jsxs)("div",{className:"relative flex-auto overflow-hidden text-sm",children:[n.jsx("pre",{className:"absolute inset-0 overflow-auto whitespace-pre-wrap p-4",children:JSON.stringify(r.data,null,"	")}),(0,n.jsxs)("div",{className:"absolute right-8 top-4 flex gap-3",children:[n.jsx("button",{className:"center w-24 rounded bg-gray-100 px-4 py-2 text-gray-700 hover:bg-gray-200",onClick:async()=>{d(!0);try{await fetch("/api/dev/redeliver",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id})})}finally{d(!1)}},disabled:s,children:s?"...":"Redeliver"}),n.jsx("button",{className:"center w-24 rounded bg-gray-100 px-4 py-2 text-gray-700 hover:bg-gray-200",onClick:async()=>{l(!0);try{let e=await fetch("/api/dev/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:r.id})}),{message:t}=await e.json();alert(t)}finally{l(!1)}},disabled:i,children:i?"...":"Simulate"})]})]}):r?n.jsx("div",{className:"center flex flex-auto items-center justify-center text-xl text-gray-300",children:"loading..."}):null]})]})}[i,l]=s.then?(await s)():s,a()}catch(e){a(e)}})},6371:(e,t,r)=>{r.d(t,{AF:()=>a});let a="307634"},9977:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{xA:()=>c});var n=r(3418),i=r(9974),o=r(6206),l=r.n(o),s=r(4287),d=r(6371),u=e([i]);i=(u.then?(await u)():u)[0];let h=s.Octokit.plugin(function(e){e.hook.wrap("request",async(e,t)=>{let r=t.url.replace(/{([^}]+)}/g,(e,r)=>t[r]),a=`${t.method} ${r}`;t.request.retryCount&&(a+=` (retry ${t.request.retryCount})`);try{let r=await e(t);return l().log(`[gh] ${r.status} ${a}`),r}catch(e){throw l().log(`[gh] ${e.status} ${a}`),e}})},n.retry).defaults({retry:{doNotRetry:[400,401,403,422,451]}});function c(){let{privateKey:e,webhookSecret:t}=function(){let e=process.env.REPO_SYNC_PRIVATE_KEY_B64;(0,i.hu)("string"==typeof e,"REPO_SYNC_PRIVATE_KEY_B64 must be a string");let t=Buffer.from(e,"base64").toString("utf-8"),r=process.env.REPO_SYNC_HOOK_SECRET;return(0,i.hu)("string"==typeof r,"REPO_SYNC_HOOK_SECRET must be a string"),{privateKey:t,webhookSecret:r}}();return new s.App({Octokit:h,appId:d.AF,privateKey:e,webhooks:{secret:t},log:l()})}a()}catch(e){a(e)}})},9974:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{hu:()=>i.hu});var n=r(5234);r(8622),r(5494),r(1726),r(8917),r(2569);var i=r(4769);r(2483),r(5042),r(4606),r(6856),r(3066);var o=r(6713);r(5051),r(3886),r(4759),r(8119);var l=e([o]);o=(l.then?(await l)():l)[0],(0,n.x)(globalThis.TLDRAW_LIBRARY_NAME,globalThis.TLDRAW_LIBRARY_VERSION,globalThis.TLDRAW_LIBRARY_MODULES),a()}catch(e){a(e)}})},1726:(e,t,r)=>{r(4769)},8917:(e,t,r)=>{r(3066)},2569:(e,t,r)=>{r(4769)},4769:(e,t,r)=>{function a(e){let t=(...r)=>{try{return e(...r)}catch(e){throw e instanceof Error&&Error.captureStackTrace&&Error.captureStackTrace(e,t),e}};return t}r.d(t,{hu:()=>n});let n=a((e,t)=>{if(!e)throw Error(t||"Assertion Error")});a((e,t)=>{if(null==e)throw Error(t??"value must be defined");return e})},2483:(e,t,r)=>{new WeakMap},5042:(e,t,r)=>{globalThis.crypto},4606:(e,t,r)=>{r(4769),r(6856);let a=Object.freeze(["image/svg+xml"]);[...Object.freeze([...Object.freeze(["image/jpeg","image/png","image/webp"]),...a,...Object.freeze(["image/gif","image/apng","image/avif"])]),...Object.freeze(["video/mp4","video/webm","video/quicktime"])].join(",")},6856:(e,t,r)=>{/*!
 * MIT License: https://github.com/alexgorbatchev/crc/blob/master/LICENSE
 * Copyright: 2014 Alex Gorbatchev
 * Code: crc32, https://github.com/alexgorbatchev/crc/blob/master/src/calculators/crc32.ts
 */let a=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];"undefined"!=typeof Int32Array&&(a=new Int32Array(a))},3066:(e,t,r)=>{},6713:(e,t,r)=>{r.a(e,async(e,t)=>{try{var a=r(1122),n=e([a]);a=(n.then?(await n)():n)[0],t()}catch(e){t(e)}})},5051:(e,t,r)=>{r(4769)},3886:(e,t,r)=>{},4759:(e,t,r)=>{let a="undefined"!=typeof globalThis&&globalThis.structuredClone?[globalThis.structuredClone,!0]:"undefined"!=typeof global&&global.structuredClone?[global.structuredClone,!0]:[e=>e?JSON.parse(JSON.stringify(e)):e,!1],n=a[0];a[1],Object.getPrototypeOf(n({}))},5234:(e,t,r)=>{r.d(t,{x:()=>n});let a="__TLDRAW_LIBRARY_VERSIONS__";function n(e,t,r){if(!e||!t||!r){if(globalThis.TLDRAW_LIBRARY_IS_BUILD)throw Error("Missing name/version/module system in built version of tldraw library");return}let n=function(){if(globalThis[a])return globalThis[a];let e={versions:[],didWarn:!1,scheduledNotice:null};return Object.defineProperty(globalThis,a,{value:e,writable:!1,configurable:!1,enumerable:!1}),e}();if(n.versions.push({name:e,version:t,modules:r}),!n.scheduledNotice)try{n.scheduledNotice=setTimeout(()=>{n.scheduledNotice=null,i(n)},100)}catch{i(n)}}function i(e){if(!e.versions.length||e.didWarn)return;let t=e.versions.sort((e,t)=>o(e.version,t.version)),r=t[t.length-1].version,a=new Set,n=new Map;for(let e of t){if(n.has(e.name)){a.delete(e.name),d(n,e.name,new Set).add(e.version);continue}e.version===r?a.add(e.name):(a.delete(e.name),d(n,e.name,new Set).add(e.version))}if(n.size>0){console.log([`${s("[tldraw]",["bold","bgRed","textWhite"])} ${s("You have multiple versions of tldraw libraries installed. This can lead to bugs and unexpected behavior.",["textRed","bold"])}`,"",`The latest version you have installed is ${s(`v${r}`,["bold","textBlue"])}. The following libraries are on the latest version:`,...Array.from(a,e=>`  • ✅ ${s(e,["bold"])}`),"","The following libraries are not on the latest version, or have multiple versions installed:",...Array.from(n,([e,t])=>{let a=Array.from(t).sort(o).map(e=>s(`v${e}`,e===r?["textGreen"]:["textRed"]));return`  • ❌ ${s(e,["bold"])} (${a.join(", ")})`})].join("\n")),e.didWarn=!0;return}let i=new Map;for(let e of t)d(i,e.name,{version:e.version,modules:[]}).modules.push(e.modules);let l=new Map;for(let[e,t]of i)t.modules.length>1&&l.set(e,t);if(l.size>0){console.log([`${s("[tldraw]",["bold","bgRed","textWhite"])} ${s("You have multiple instances of some tldraw libraries active. This can lead to bugs and unexpected behavior. ",["textRed","bold"])}`,"","This usually means that your bundler is misconfigured, and is importing the same library multiple times - usually once as an ES Module, and once as a CommonJS module.","","The following libraries have been imported multiple times:",...Array.from(l,([e,t])=>{let r=t.modules.map((e,t)=>"esm"===e?`      ${t+1}. ES Modules`:`      ${t+1}. CommonJS`).join("\n");return`  • ❌ ${s(e,["bold"])} v${t.version}: 
${r}`}),"","You should configure your bundler to only import one version of each library."].join("\n")),e.didWarn=!0;return}}function o(e,t){let r=e.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/),a=t.match(/^(\d+)\.(\d+)\.(\d+)(?:-(\w+))?$/);return r&&a?r[1]!==a[1]?Number(r[1])-Number(a[1]):r[2]!==a[2]?Number(r[2])-Number(a[2]):r[3]!==a[3]?Number(r[3])-Number(a[3]):r[4]&&a[4]?r[4].localeCompare(a[4]):r[4]?1:a[4]?-1:0:e.localeCompare(t)}let l={bold:"1",textBlue:"94",textRed:"31",textGreen:"32",bgRed:"41",textWhite:"97"};function s(e,t=[]){return`\x1b[${t.map(e=>l[e]).join(";")}m${e}\x1b[m`}function d(e,t,r){return e.has(t)?e.get(t):(e.set(t,r),r)}},8119:(e,t,r)=>{},4591:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},3418:e=>{e.exports=require("@octokit/plugin-retry")},8622:e=>{e.exports=require("lodash.throttle")},5494:e=>{e.exports=require("lodash.uniq")},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},4287:e=>{e.exports=require("octokit")},6689:e=>{e.exports=require("react")},997:e=>{e.exports=require("react/jsx-runtime")},1122:e=>{e.exports=import("fractional-indexing-jittered")},6206:e=>{e.exports=require("console")},1017:e=>{e.exports=require("path")}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[902],()=>r(1148));module.exports=a})();