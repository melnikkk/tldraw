(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{3138:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/deliveries",function(){return a(3750)}])},3750:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return n},default:function(){return s}});var i=a(2322),r=a(2784),n=!0;function s(e){let{deliveries:t,cursor:a}=e,[n,s]=(0,r.useState)(null),[l,d]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(!n||n&&n.data)return;let e=!1;return(async()=>{let t=await fetch(`/api/dev/getDelivery?id=${n.id}`),a=await t.json();e||s({id:n.id,data:a})})(),()=>{e=!0}}),(0,i.jsxs)("div",{className:"absolute inset-0 flex h-screen flex-col overflow-hidden",children:[(0,i.jsx)("h1",{className:"flex-none border-b px-5 py-4 text-xl",children:"Deliveries"}),(0,i.jsxs)("div",{className:"flex flex-auto overflow-hidden",children:[(0,i.jsxs)("ol",{className:"w-96 flex-none overflow-auto border-r",children:[t.map(e=>{var t;return(0,i.jsxs)("li",{className:`border-b px-5 py-3 ${n?.id===e.id?"bg-blue-100":"hover:bg-gray-50"}`,onClick:()=>s({id:e.id}),children:[(0,i.jsxs)("div",{className:"font-semibold",children:[e.event,e.action&&`.${e.action}`]}),(0,i.jsx)("div",{className:"text-sm",children:(t=new Date(e.delivered_at),new Intl.DateTimeFormat("en-GB",{dateStyle:"short",timeStyle:"short"}).format(t))})]},e.id)}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{className:"center flex items-center justify-center border-b px-5 py-3 hover:bg-gray-50",href:`?cursor=${a}`,children:"Load more..."})})]}),n&&n.data?(0,i.jsxs)("div",{className:"relative flex-auto overflow-hidden text-sm",children:[(0,i.jsx)("pre",{className:"absolute inset-0 overflow-auto whitespace-pre-wrap p-4",children:JSON.stringify(n.data,null,"	")}),(0,i.jsxs)("div",{className:"absolute right-8 top-4 flex gap-3",children:[(0,i.jsx)("button",{className:"center w-24 rounded bg-gray-100 px-4 py-2 text-gray-700 hover:bg-gray-200",onClick:async()=>{c(!0);try{await fetch("/api/dev/redeliver",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id})})}finally{c(!1)}},disabled:o,children:o?"...":"Redeliver"}),(0,i.jsx)("button",{className:"center w-24 rounded bg-gray-100 px-4 py-2 text-gray-700 hover:bg-gray-200",onClick:async()=>{d(!0);try{let e=await fetch("/api/dev/simulate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:n.id})}),{message:t}=await e.json();alert(t)}finally{d(!1)}},disabled:l,children:l?"...":"Simulate"})]})]}):n?(0,i.jsx)("div",{className:"center flex flex-auto items-center justify-center text-xl text-gray-300",children:"loading..."}):null]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=3138)}),_N_E=e.O()}]);
//# sourceMappingURL=deliveries-94b8b422229aa94a.js.map